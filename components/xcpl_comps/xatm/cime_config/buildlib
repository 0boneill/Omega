#!/usr/bin/env python2

"""
build xcpl library
"""

import sys, os

_CIMEROOT = os.environ.get("CIMEROOT")
if _CIMEROOT is None:
    raise SystemExit("ERROR: must set CIMEROOT environment variable")
sys.path.append(os.path.join(os.environ["CIMEROOT"],"scripts","Tools"))

from standard_script_setup import *
from CIME.buildlib         import build_xcpl_lib, parse_command_line

logger = logging.getLogger(__name__)

###############################################################################
def _main_func():
###############################################################################

    if "--test" in sys.argv:
        test_results = doctest.testmod(verbose=True)
        sys.exit(1 if test_results.failed > 0 else 0)

    parser = argparse.ArgumentParser()

    CIME.utils.setup_standard_logging_options(parser)

    caseroot, bldroot, libroot = parse_command_line(sys.argv, parser)

    build_xcpl_lib('atm', 'xatm', caseroot, bldroot, libroot)

###############################################################################

if __name__ == "__main__":
    _main_func()

