<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIO User&#39;s Guide: </title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Types&nbsp;List</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="Introduction">
Introduction</a></h2>
<p>PIO is a software interface layer designed to encapsolate the complexities of parallel IO and make it easier to replace the lower level software backend. It currently supports netcdf (<a href="http://www.unidata.com">http://www.unidata.com</a>), pnetcdf (<a href="http://trac.mcs.anl.gov/projects/parallel-netcdf">http://trac.mcs.anl.gov/projects/parallel-netcdf</a>) and MPI-IO.</p>
<p>PIO calls are collective, an MPI communicator is set in a call to <a class="el" href="group__PIO__init.html">PIO_init</a> and all tasks associated with that communicator must participate in all subsequent calls to PIO. An application can make multiple calls to PIO in order to support multiple MPI communicators.</p>
<p>To use PIO your program should begin by calling the <a class="el" href="group__PIO__init.html">PIO_init</a> function providing the MPI communicator and the rank within that communicator of the calling task. You should also provide the number of iotasks to be used, the stride or number of tasks between iotasks, and the number of mpi aggregators to be used. You may optionally also choose the base IO task, this task will be used for output of any non-decomposed data. This call initializes an IO system type structure that will be used in subsequent file and decomposition functions.</p>
<p>You can then open a file for reading or writing with a call to <a class="el" href="group__PIO__createfile.html">PIO_createfile</a> or <a class="el" href="group__PIO__openfile.html">PIO_openfile</a>. In this call you will specify the file type (netcdf, pnetcdf, or binary) along with the file name and optionally the netcdf mode.</p>
<p>To read or write decomposed data you must first describe the mapping between the organization of data in the file and that in the application space. This is done in a call to <a class="el" href="group__PIO__initdecomp.html">PIO_initdecomp</a>. In the simplist call to this function a one dimensional integer array is passed from each task the values in the array represent the 0 based offset from the beginning of the array on file.</p>
<h2><a class="anchor" id="error">
Error Handling</a></h2>
<p>By default PIO handles errors internally by printing a string describing the error and then calling mpi_abort. Application developers can change this behaivior with a call to <a class="el" href="group__PIO__seterrorhandling.html">PIO_seterrorhandling</a>. The three types of error handling methods are:. <ul>
<li>PIO_INTERNAL_ERROR : abort on error from any task</li>
<li>PIO_BCAST_ERROR : broadcast an error from io_rank 0 to all tasks in comm</li>
<li>PIO_RETURN_ERROR : do nothing - allow the user to handle it </li>
</ul>
</p>
<p>For example if a developer wanted to see if an input netcdf file contained the variable 'U' they might do the following</p>
<div class="fragment"><pre class="fragment"> call pio_seterrorhandling(File, PIO_BCAST_ERROR)
 ierr =  pio_inq_varid(File, 'U', uid)
 call pio_seterrorhandling(File, PIO_INTERNAL_ERROR)
 if(ierr/= PIO_NOERR) then
   write(stderr,*) 'Variable U not found on input file, setting to 0'
   U=0
 else
   ...
 endif
</pre></div> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Dec 16 15:25:20 2009 for PIO User's Guide by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
